(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function d(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(e){if(e.ep)return;e.ep=!0;const n=d(e);fetch(e.href,n)}})();const a=[{tag:"IP_ADDRESS",label:"IP Address"},{tag:"EMAIL",label:"Email"},{tag:"PHONE",label:"Phone Number"},{tag:"CREDIT_CARD",label:"Credit Card"},{tag:"MAC_ADDRESS",label:"MAC Address"}];document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("pii-types-checkboxes");a.forEach(t=>{const d=document.createElement("div");d.innerHTML=`<input type="checkbox" id="${t.tag}" value="${t.tag}" checked><label for="${t.tag}">${t.label}</label>`,r.appendChild(d)}),document.getElementById("scrubButton").addEventListener("click",i),document.getElementById("copyScrubbedText").addEventListener("click",()=>l("scrubbedText")),document.getElementById("copyLegend").addEventListener("click",()=>l("legend"))});async function i(){const r=document.getElementById("scrubButton"),t=document.getElementById("scrubbedText"),d=document.getElementById("legend"),o=a.filter(e=>document.getElementById(e.tag).checked).map(e=>e.tag);if(!document.getElementById("inputText").value||o.length==0)return alert("Input text and at least one PII type are required.");r.disabled=!0,r.textContent="Scrubbing...",t.textContent="",d.innerHTML="";try{const e=await fetch("/api/scrub",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:document.getElementById("inputText").value,types:o,allow_list:document.getElementById("allowList").value.split(`
`).filter(c=>c.trim()!=="")})});if(!e.ok)throw new Error((await e.json()).detail||`HTTP error! status: ${e.status}`);const n=await e.json();t.textContent=n.scrubbed_text,s(n.legend)}catch(e){alert(`An error occurred: ${e.message}`),t.textContent="An error occurred. Check console for details."}finally{r.disabled=!1,r.textContent="Scrub Text"}}function s(r){const t=document.getElementById("legend");if(t.innerHTML="",r.length===0){t.textContent="No PII was found or scrubbed.";return}["Type","Mock","Original"].forEach(o=>{const e=document.createElement("div");e.className="header",e.textContent=o,t.appendChild(e)}),r.forEach(o=>{["type","mock","original"].forEach(e=>{const n=document.createElement("div");n.textContent=o[e],t.appendChild(n)})})}function l(r){var t;(t=navigator.clipboard)==null||t.writeText(document.getElementById(r).innerText).then(()=>alert("Copied!"))}
